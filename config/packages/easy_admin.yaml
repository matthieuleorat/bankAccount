easy_admin:
    site_name: 'Mon Budget'
    formats:
        date:     'd/m/Y'
        time:     'H:i'
        datetime: 'd/m/Y H:i:s'
    entities:
        Debt:
            class: App\Entity\Debt
            controller: App\Controller\Admin\DebtController
            label: debt.entity.label
            list:
                fields:
                    - { property: 'amount', label: 'debt.amount.label' }
                    - { property: 'date', label: 'debt.date.label' }
                    - { property: 'debtor', label: 'debt.debtor.label' }
                    - { property: 'creditor', label: 'debt.creditor.label' }
                    - { property: 'expense', label: 'debt.expense.label' }
                    - { property: 'is_fulfilled', label: 'debt.isFulfilled.label' }
            form:
                fields:
                    - { property: 'amount', label: 'debt.amount.label' }
                    - { property: 'date', label: 'debt.date.label', type_options: { widget: 'single_text'} }
                    - { property: 'debtor', label: 'debt.debtor.label' }
                    - { property: 'creditor', label: 'debt.creditor.label' }
                    - { property: 'isFulfilled', label: 'debt.isFulfilled.label' }
                    - { property: 'comment', label: 'debt.comment.label' }
                    - { property: 'expense', label: 'debt.expense.label' }
        Transaction:
            class: App\Entity\Transaction
            controller: App\Controller\Admin\TransactionController
            label: transaction.entity.name
            list:
                filters: ['statement', 'date']
                actions:
                    - { name: 'create_expense', template: 'admin/transaction/list/action/create_expense_from_transaction_action.html.twig' }
                fields:
                    - { property: 'date', label: 'transaction.date'}
                    - { property: 'details', label: 'transaction.details', template: 'admin/transaction/list/details.html.twig'}
                    - { property: 'expenses', label: 'transaction.expenses', template: 'admin/transaction/list/expenses.html.twig'}
                    - { property: 'amount', label: 'transaction.amount', template: 'admin/transaction/list/amount.html.twig'}
            form:
                fields:
                    - { property: 'date', label: 'transaction.date', type_options: { widget: 'single_text'}}
                    - { property: 'details', label: 'transaction.details'}
                    - { property: 'debit', label: 'transaction.debit'}
                    - { property: 'credit', label: 'transaction.credit'}
                    - { property: 'createExpense', type: 'checkbox', label: 'transaction.createexpense'}

            show:
                fields:
                    - { property: 'date', label: 'transaction.date'}
                    - { property: 'details', label: 'transaction.details'}
                    - { property: 'amount', template: 'admin/transaction/list/amount.html.twig', label: 'transaction.amount'}
                    - { property: 'type', template: 'admin/transaction/show/type.html.twig', label: 'transaction.type'}

        TransactionWithoutExpense:
            class: App\Entity\Transaction
            list:
                actions:
                    - { name: 'create_expense', template: 'admin/transaction/list/action/create_expense_from_transaction_action.html.twig' }
                    - { name: 'toggleIgnore', template: 'admin/transaction/list/action/ignore_transaction.html.twig' }
                dql_filter: 'entity.expenses is empty and (entity.ignore = false or entity.ignore is null)'
                fields:
                    - { property: 'date', label: 'transaction.date'}
                    - { property: 'details', template: 'admin/transaction/list/details.html.twig', label: 'transaction.details'}
                    - { property: 'amount', template: 'admin/transaction/list/amount.html.twig', label: 'transaction.amount'}
        IgnoredTransaction:
            class: App\Entity\Transaction
            list:
                actions:
                    - { name: 'toggleIgnore', template: 'admin/transaction/list/action/ignore_transaction.html.twig' }
                    - '-edit'
                    - '-new'
                dql_filter: 'entity.ignore = true'
                fields:
                    - { property: 'date', label: 'transaction.date'}
                    - { property: 'details', template: 'admin/transaction/list/details.html.twig', label: 'transaction.details'}
                    - { property: 'amount', template: 'admin/transaction/list/amount.html.twig', label: 'transaction.amount'}
        Category:
            class: App\Entity\Category
            controller: App\Controller\Admin\CategoryController
            label: 'category.entity.name'
            list:
                fields:
                    - { property: 'name', label: 'category.name.label' }
                    - { property: 'parent', label: 'category.parent.label' }
                    - { property: 'budget', label: 'category.budget.label' }
            form:
                fields:
                    - { property: 'name', label: 'category.name.label' }
                    - { property: 'parent', label: 'category.parent.label', type: 'App\Form\CategoryType' }
                    - { property: 'budget', label: 'category.budget.label' }
        Source:
            class: App\Entity\Source
            label: 'source.entity.name'
            list:
                fields:
                    - { property: 'name', label: 'source.name.label' }
                    - { property: 'number', label: 'source.number.label' }
                    - { property: 'statements', label: 'source.statements.label' }
                    - { property: 'defaultBudget', label: 'source.defaultBudget.label' }
            form:
                fields:
                    - { property: 'name', label: 'source.name.label' }
                    - { property: 'number', label: 'source.number.label' }
                    - { property: 'statements', label: 'source.statements.label' }
                    - { property: 'defaultBudget', label: 'source.defaultBudget.label' }
        Statement:
            class: App\Entity\Statement
        Expense:
            class: App\Entity\Expense
            controller: App\Controller\Admin\ExpenseController
            form:
                fields:
                    - label
                    - { property: 'category', type: 'App\Form\CategoryType' }
                    - debit
                    - credit
                    - date
                    - budget
            list:
                filters:
                    - property: 'category'
                      type: 'App\Form\Filter\CategoryWithChildrenFilterType'
                    - 'date'
                    - 'budget'
                    - 'label'
                actions:
                    - { name: 'create_debt', template: 'admin/expense/list/action/create_debt_from_expense.html.twig' }
                fields:
                    - date
                    - { property: 'label', template: 'admin/expense/list/details.html.twig'}
                    - category
                    - { property: 'amount', template: 'admin/transaction/list/amount.html.twig', label: 'Montant'}
                    - budget
        DetailsToCategory:
            class: App\Entity\DetailsToCategory
            controller: App\Controller\Admin\DetailsToCategoryAdminController
            list:
                actions: ['apply']
            form:
                fields:
                    - { type: 'group', columns: 4, label: 'Filtre' }
                    - { property: 'regex', label: 'Nom'}
                    - { property: 'filters', label: 'Filtres', type: 'collection', type_options: { allow_delete: true, allow_add: true, by_reference: false, entry_type: 'App\Form\FilterType'}}
#                    - { type: 'section', label: 'Dépense' }
                    - { type: 'group', columns: 8, label: 'Dépense' }
                    - { property: 'label', label: 'Champ dans lequel prendre le label à associer à la dépense', type: 'App\Form\AttributeSelectionType'}
                    - { property: 'category', label: 'Catégorie', type: 'App\Form\CategoryType'}
                    - { property: 'debit', label: 'Champ dans lequel prendre le montant du débit à la dépense', type: 'App\Form\AttributeSelectionType'}
                    - { property: 'credit', label: 'Champ dans lequel prendre le montant du crédit à la dépense', type: 'App\Form\AttributeSelectionType'}
                    - { property: 'date', label: 'Champ dans lequel prendre la date', type: 'App\Form\AttributeSelectionType'}
                    - { property: 'comment', label: 'Commentaire'}

        Budget:
            class: App\Entity\Budget
            controller: App\Controller\Admin\BudgetController
            templates:
                show: 'admin/budget/show.html.twig'
            list:
                fields:
                    - { property: 'name', template: 'admin/budget/list/name.html.twig', label: 'Nom'}
    design:
        menu:
            - { label: 'source.label', entity: 'Source' }
            - label: 'transaction.menu.label'
              children:
                - { label: 'transaction.menu.all', entity: 'Transaction' }
                - { label: 'transaction.menu.withoutexpenses', entity: 'TransactionWithoutExpense' }
                - { label: 'transaction.menu.ignoredTransaction', entity: 'IgnoredTransaction' }
            - label: 'expense.label'
              children:
                  - {label: 'expense.all.label', entity: 'Expense'}
            - { label: 'detailstocategory.label', entity: 'DetailsToCategory' }
            - label: 'statement.label'
              children:
                - { label: 'statement.all.label', entity: 'Statement' }
                - { label: 'statement.import.label', route: 'import_new_statement'}
            - { label: 'budget.label', entity: 'Budget'}
            - label: 'debt.label'
              children:
                - { label: 'debt.menu.all', entity: 'Debt'}
                - { label: 'debt.menu.seeBalance', route: 'see_balance'}
